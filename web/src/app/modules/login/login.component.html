<div
  class="relative w-screen min-h-dvh overflow-hidden bg-gradient-to-br from-gray-900 via-slate-900 to-gray-950 text-white"
>
  <div
    class="pointer-events-none absolute -top-24 -left-24 h-80 w-80 rounded-full bg-indigo-600/30 blur-3xl"
  ></div>
  <div
    class="pointer-events-none absolute -bottom-32 -right-24 h-96 w-96 rounded-full bg-teal-500/20 blur-3xl"
  ></div>
  <div
    aria-hidden
    class="absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,rgba(99,102,241,0.08),transparent_35%),radial-gradient(circle_at_80%_30%,rgba(20,184,166,0.08),transparent_35%)]"
  ></div>

  <div class="relative z-10 flex min-h-dvh w-screen flex-col">
    <header class="w-full px-6 pt-8 lg:px-10">
      <div class="flex flex-col items-start justify-between gap-6 lg:flex-row lg:items-center">
        <div>
          <h1 class="text-5xl font-extrabold tracking-tight lg:text-6xl">Drone Racing</h1>
          <p class="mt-2 max-w-3xl text-base text-gray-300 lg:text-lg">
            Sign in to join the race — unlock boosts and chase the leaderboard.
          </p>
        </div>
      </div>
    </header>

    <main class="flex-1 flex items-center justify-center px-6 pb-10 pt-6 lg:px-10">
      <div class="mx-auto w-full max-w-6xl">
        <div class="grid w-full grid-cols-1 gap-8 place-items-center lg:grid-cols-2">
          <section class="order-2 w-full flex justify-center lg:order-1">
            <div
              class="w-full max-w-lg rounded-2xl border border-white/10 bg-white/5 p-8 shadow-2xl backdrop-blur"
            >
              <div class="mb-6 flex items-center justify-between">
                <h2 class="text-3xl font-semibold">Race Preview</h2>
                <div class="text-sm text-gray-400">Live feel</div>
              </div>

              <div class="space-y-5">
                <div class="rounded-xl border border-white/10 bg-white/5 p-5">
                  <div class="mb-3 flex items-center justify-between">
                    <span class="text-base text-gray-300 font-medium">Falcon X</span>
                    <span
                      class="rounded-full bg-blue-100/10 px-3 py-1 text-xs font-medium text-blue-300 ring-1 ring-blue-300/20"
                      >running</span
                    >
                  </div>
                  <div class="h-3.5 w-full overflow-hidden rounded-full bg-white/10">
                    <div
                      class="h-3.5 w-[72%] bg-gradient-to-r from-indigo-700 to-teal-400 transition-all duration-500"
                    ></div>
                  </div>
                </div>

                <div class="rounded-xl border border-white/10 bg-white/5 p-5">
                  <div class="mb-3 flex items-center justify-between">
                    <span class="text-base text-gray-300 font-medium">Aurora-9</span>
                    <span
                      class="rounded-full bg-gray-100/10 px-3 py-1 text-xs font-medium text-gray-300 ring-1 ring-white/10"
                      >idle</span
                    >
                  </div>
                  <div class="h-3.5 w-full overflow-hidden rounded-full bg-white/10">
                    <div
                      class="h-3.5 w-[28%] bg-gradient-to-r from-indigo-700 to-teal-400 transition-all duration-500"
                    ></div>
                  </div>
                </div>

                <div class="rounded-xl border border-white/10 bg-white/5 p-5">
                  <div class="mb-3 flex items-center justify-between">
                    <span class="text-base text-gray-300 font-medium">Nebula</span>
                    <span
                      class="rounded-full bg-green-100/10 px-3 py-1 text-xs font-medium text-green-300 ring-1 ring-green-300/20"
                      >finished</span
                    >
                  </div>
                  <div class="h-3.5 w-full overflow-hidden rounded-full bg-white/10">
                    <div class="h-3.5 w-[100%] bg-gradient-to-r from-indigo-700 to-teal-400"></div>
                  </div>
                </div>
              </div>

              <div class="mt-7">
                <button
                  type="button"
                  class="btn btn-lg w-full transform rounded-xl bg-gradient-to-r from-indigo-600 to-teal-500 px-6 py-3.5 text-base font-semibold text-white shadow-xl transition-all duration-300 hover:-translate-y-1 hover:from-indigo-700 hover:to-teal-600 hover:shadow-2xl focus:outline-none focus:ring-4 focus:ring-indigo-300/30"
                >
                  Watch Demo Lap
                </button>
              </div>
            </div>
          </section>

          <section class="order-1 w-full flex justify-center lg:order-2">
            <div
              class="relative w-full max-w-lg overflow-hidden rounded-2xl border border-white/10 bg-white/5 p-10 shadow-2xl backdrop-blur"
            >
              <div
                class="absolute inset-0 -z-10 bg-[conic-gradient(at_70%_10%,rgba(99,102,241,0.12),transparent_30%,rgba(20,184,166,0.12),transparent_60%)] opacity-70"
              ></div>

              <h2 class="mb-3 text-center text-4xl font-extrabold tracking-tight">Sign in</h2>
              <p class="mb-10 text-center text-sm text-gray-300">
                Earn XP, unlock skins, and climb the leaderboard.
              </p>

              <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="space-y-7">
                <!-- Username -->
                <div>
                  <label for="username" class="mb-1 block text-sm font-medium text-gray-200"
                    >Username</label
                  >
                  <input
                    id="username"
                    type="text"
                    formControlName="username"
                    autocomplete="username"
                    class="w-full rounded-xl border border-white/10 bg-white/10 px-4 py-3.5 text-white placeholder-gray-400 shadow-inner outline-none transition focus:ring-4 focus:ring-indigo-500/30"
                    placeholder="pilot_id"
                    required
                    aria-describedby="username-help username-error"
                  />
                  <div id="username-help" class="mt-1 text-xs text-gray-400">
                    Your racer handle.
                  </div>
                  @if (loginForm.get('username')?.touched && loginForm.get('username')?.invalid) {
                  <div id="username-error" class="mt-2 text-xs text-red-400">
                    Username is required.
                  </div>
                  }
                </div>

                <!-- Password -->
                <div>
                  <label for="password" class="mb-1 block text-sm font-medium text-gray-200"
                    >Password</label
                  >
                  <div class="relative">
                    <input
                      id="password"
                      [type]="showPassword ? 'text' : 'password'"
                      formControlName="password"
                      autocomplete="current-password"
                      class="w-full rounded-xl border border-white/10 bg-white/10 px-4 py-3.5 pr-12 text-white placeholder-gray-400 shadow-inner outline-none transition focus:ring-4 focus:ring-indigo-500/30"
                      placeholder="••••••••"
                      required
                      aria-describedby="password-error"
                    />
                    <button
                      type="button"
                      (click)="showPassword = !showPassword"
                      class="absolute inset-y-0 right-0 my-1.5 mr-2 flex h-9 w-9 items-center justify-center rounded-lg bg-white/10 text-gray-200 ring-1 ring-white/10 transition hover:bg-white/20 focus:outline-none focus:ring-2 focus:ring-indigo-400"
                      aria-label="Toggle password visibility"
                    >
                      @if (showPassword) {
                      <svg class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor" aria-hidden>
                        <path
                          d="M3 3l18 18-1.5 1.5L18 20.9A12.6 12.6 0 0 1 12 22C5 22 2 15 2 15a22.8 22.8 0 0 1 5.5-6.6L1.5 4.5 3 3l3.5 3.5A12.7 12.7 0 0 1 12 4c7 0 10 7 10 7a21.8 21.8 0 0 1-3.4 5.2l-2-2A13.6 13.6 0 0 0 20 11.9S17 6 12 6a10.7 10.7 0 0 0-3.8.9L6.6 5.3 3 3z"
                        />
                      </svg>
                      } @else {
                      <svg class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor" aria-hidden>
                        <path
                          d="M12 5c-7 0-10 7-10 7s3 7 10 7 10-7 10-7-3-7-10-7zm0 11a4 4 0 1 1 0-8 4 4 0 0 1 0 8z"
                        />
                      </svg>
                      }
                    </button>
                  </div>
                  @if (loginForm.get('password')?.touched && loginForm.get('password')?.invalid) {
                  <div id="password-error" class="mt-2 text-xs text-red-400">
                    Password is required.
                  </div>
                  }
                </div>

                @if (errorMessage) {
                <div
                  class="rounded-lg border border-red-500/30 bg-red-500/10 px-4 py-3 text-center text-sm text-red-300"
                >
                  {{ errorMessage }}
                </div>
                }

                <div class="flex items-center justify-between">
                  <label class="inline-flex items-center gap-2 text-sm text-gray-300">
                    <input
                      type="checkbox"
                      formControlName="remember"
                      class="h-4 w-4 rounded border-white/20 bg-white/10 text-indigo-500 focus:ring-indigo-400"
                    />
                    Remember me
                  </label>
                  <a class="text-sm text-teal-300 underline-offset-4 hover:underline" href="/forgot"
                    >Forgot password?</a
                  >
                </div>

                <button
                  type="submit"
                  [disabled]="loginForm.invalid || loading"
                  class="btn btn-lg group w-full transform rounded-xl bg-gradient-to-r from-indigo-600 to-teal-500 px-6 py-3.5 font-bold text-white shadow-xl transition-all duration-300 hover:-translate-y-1 hover:from-indigo-700 hover:to-teal-600 hover:shadow-2xl focus:outline-none focus:ring-4 focus:ring-indigo-300/30 disabled:cursor-not-allowed disabled:opacity-60"
                >
                  <span class="inline-flex items-center justify-center gap-2">
                    <svg
                      *ngIf="loading"
                      class="h-5 w-5 animate-spin"
                      viewBox="0 0 24 24"
                      fill="none"
                      aria-hidden
                    >
                      <circle
                        cx="12"
                        cy="12"
                        r="10"
                        stroke="currentColor"
                        stroke-opacity="0.2"
                        stroke-width="4"
                      ></circle>
                      <path
                        d="M22 12a10 10 0 0 1-10 10"
                        stroke="currentColor"
                        stroke-width="4"
                      ></path>
                    </svg>
                    Login
                  </span>
                </button>

                <div class="text-center text-xs text-gray-400">
                  By signing in you accept our
                  <a class="text-indigo-300 hover:underline" href="/terms">Terms</a>.
                </div>
              </form>
            </div>
          </section>
        </div>
      </div>
    </main>
  </div>
</div>
